
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for VT.ai - Minimal Multimodal AI Chat App with Dynamic Routing">
      
      
        <meta name="author" content="vinhnx">
      
      
        <link rel="canonical" href="https://vinhnx.github.io/VT.ai/developer/rust-implementation/">
      
      
        <link rel="prev" href="../tools/">
      
      
        <link rel="next" href="../../api/">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Rust Implementation - VT.ai Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rust-implementation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="VT.ai Documentation" class="md-header__button md-logo" aria-label="VT.ai Documentation" data-md-component="logo">
      
  <img src="../../images/logo_dark.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VT.ai Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rust Implementation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/vinhnx/VT.ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="VT.ai Documentation" class="md-nav__button md-logo" aria-label="VT.ai Documentation" data-md-component="logo">
      
  <img src="../../images/logo_dark.png" alt="logo">

    </a>
    VT.ai Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vinhnx/VT.ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extending/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending VT.ai
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Context Protocol
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantic Routing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assistant Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Rust Implementation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Rust Implementation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-server-srcapp" class="md-nav__link">
    <span class="md-ellipsis">
      Web Server (src/app/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-system-srcrouter" class="md-nav__link">
    <span class="md-ellipsis">
      Routing System (src/router/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-client-srcmodels" class="md-nav__link">
    <span class="md-ellipsis">
      Model Client (src/models/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tool-registry-srctools" class="md-nav__link">
    <span class="md-ellipsis">
      Tool Registry (src/tools/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-srcconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration (src/config/)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-source" class="md-nav__link">
    <span class="md-ellipsis">
      From Source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-start-with-runsh" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start with run.sh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-line-options" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Comparison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Compatibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extending-the-rust-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Extending the Rust Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extending the Rust Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-new-model-provider" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a New Model Provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-custom-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Custom Tool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-new-router" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a New Router
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Build Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      API Connection Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-development" class="md-nav__link">
    <span class="md-ellipsis">
      Future Development
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    App
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/router/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/assistants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assistants
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-server-srcapp" class="md-nav__link">
    <span class="md-ellipsis">
      Web Server (src/app/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-system-srcrouter" class="md-nav__link">
    <span class="md-ellipsis">
      Routing System (src/router/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-client-srcmodels" class="md-nav__link">
    <span class="md-ellipsis">
      Model Client (src/models/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tool-registry-srctools" class="md-nav__link">
    <span class="md-ellipsis">
      Tool Registry (src/tools/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-srcconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration (src/config/)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-source" class="md-nav__link">
    <span class="md-ellipsis">
      From Source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-start-with-runsh" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start with run.sh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-line-options" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Comparison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Compatibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extending-the-rust-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Extending the Rust Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extending the Rust Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-new-model-provider" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a New Model Provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-custom-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Custom Tool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-new-router" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a New Router
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Build Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      API Connection Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-development" class="md-nav__link">
    <span class="md-ellipsis">
      Future Development
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="rust-implementation">Rust Implementation<a class="headerlink" href="#rust-implementation" title="Permanent link">&para;</a></h1>
<p>This guide provides detailed information about VT.ai's Rust implementation, which offers a high-performance alternative to the Python version.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The Rust implementation of VT.ai is designed with performance, reliability, and efficiency as primary goals. It provides the same core functionality as the Python version but with architectural choices that optimize for speed and resource usage.</p>
<p>Key benefits of the Rust implementation:</p>
<ul>
<li><strong>Performance</strong>: Significantly faster response times and lower latency</li>
<li><strong>Resource Efficiency</strong>: Lower memory usage and CPU consumption</li>
<li><strong>Concurrency</strong>: Better handling of multiple simultaneous requests</li>
<li><strong>Reliability</strong>: Reduced likelihood of runtime errors through Rust's static typing</li>
<li><strong>Security</strong>: Memory safety guarantees from Rust's ownership model</li>
</ul>
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h2>
<p>The Rust implementation follows a similar high-level architecture to the Python version but with performance-focused components:</p>
<div class="highlight"><pre><span></span><code>┌─────────────────┐     ┌───────────────┐     ┌────────────────┐
│ Web Server      │     │ Semantic      │     │ Model          │
│ (Axum)          │────▶│ Router        │────▶│ Providers      │
└─────────────────┘     └───────────────┘     └────────────────┘
        │                       │                     │
        ▼                       ▼                     ▼
┌─────────────────┐     ┌───────────────┐     ┌────────────────┐
│ WebSocket       │     │ Tool          │     │ Configuration  │
│ Handlers        │     │ Registry      │     │ Management     │
└─────────────────┘     └───────────────┘     └────────────────┘
</code></pre></div>
<h3 id="core-components">Core Components<a class="headerlink" href="#core-components" title="Permanent link">&para;</a></h3>
<h4 id="web-server-srcapp">Web Server (<code>src/app/</code>)<a class="headerlink" href="#web-server-srcapp" title="Permanent link">&para;</a></h4>
<p>Built on the Axum web framework, the web server provides:</p>
<ul>
<li><strong>HTTP API</strong>: REST endpoints for configuration and metrics</li>
<li><strong>WebSocket Server</strong>: Real-time bidirectional communication for chat</li>
<li><strong>Static File Serving</strong>: Delivers the web interface assets</li>
<li><strong>Authentication</strong>: API key validation and session management</li>
</ul>
<h4 id="routing-system-srcrouter">Routing System (<code>src/router/</code>)<a class="headerlink" href="#routing-system-srcrouter" title="Permanent link">&para;</a></h4>
<p>The semantic routing system efficiently classifies and directs user queries:</p>
<ul>
<li><strong>Intent Classification</strong>: Uses efficient embeddings for query classification</li>
<li><strong>Router Registry</strong>: Trait-based system for pluggable routers</li>
<li><strong>Dynamic Dispatch</strong>: Fast routing to appropriate handlers</li>
<li><strong>Caching</strong>: Optimized caching of classification results</li>
</ul>
<h4 id="model-client-srcmodels">Model Client (<code>src/models/</code>)<a class="headerlink" href="#model-client-srcmodels" title="Permanent link">&para;</a></h4>
<p>Provides a unified client interface to multiple AI providers:</p>
<ul>
<li><strong>Provider Traits</strong>: Abstract provider-specific implementations</li>
<li><strong>Streaming Optimization</strong>: Efficient handling of streaming responses</li>
<li><strong>Batching</strong>: Request batching for improved throughput</li>
<li><strong>Rate Limiting</strong>: Built-in rate limit handling and backoff</li>
</ul>
<h4 id="tool-registry-srctools">Tool Registry (<code>src/tools/</code>)<a class="headerlink" href="#tool-registry-srctools" title="Permanent link">&para;</a></h4>
<p>Manages the available tools and their execution:</p>
<ul>
<li><strong>Tool Trait</strong>: Common interface for all tools</li>
<li><strong>Safe Execution</strong>: Sandboxed tool execution</li>
<li><strong>Result Streaming</strong>: Progressive result streaming</li>
<li><strong>Extension API</strong>: Easily add custom tools</li>
</ul>
<h4 id="configuration-srcconfig">Configuration (<code>src/config/</code>)<a class="headerlink" href="#configuration-srcconfig" title="Permanent link">&para;</a></h4>
<p>Handles application configuration with Rust-native approaches:</p>
<ul>
<li><strong>Structured Config</strong>: Type-safe configuration with validation</li>
<li><strong>Environment Variables</strong>: Configuration through environment</li>
<li><strong>Command Line Args</strong>: Argument parsing with Clap</li>
<li><strong>Config Files</strong>: Persistent configuration storage</li>
</ul>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<ul>
<li>Rust toolchain (1.77.0 or newer recommended)</li>
<li>Cargo package manager</li>
<li>API keys for at least one LLM provider</li>
</ul>
<h3 id="from-source">From Source<a class="headerlink" href="#from-source" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Clone the repository</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/vinhnx/VT.ai.git
<span class="nb">cd</span><span class="w"> </span>VT.ai/rust-vtai

<span class="c1"># Build the application</span>
cargo<span class="w"> </span>build<span class="w"> </span>--release

<span class="c1"># Run the application</span>
./target/release/vtai
</code></pre></div>
<h3 id="quick-start-with-runsh">Quick Start with run.sh<a class="headerlink" href="#quick-start-with-runsh" title="Permanent link">&para;</a></h3>
<p>The included <code>run.sh</code> script simplifies building and running:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run with default settings</span>
./run.sh

<span class="c1"># Run with specific API key and model</span>
./run.sh<span class="w"> </span>--api-key<span class="w"> </span><span class="nv">openai</span><span class="o">=</span>sk-your-key-here<span class="w"> </span>--model<span class="w"> </span>o3-mini
</code></pre></div>
<h3 id="docker-installation">Docker Installation<a class="headerlink" href="#docker-installation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Build the Docker image</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>vtai-rust<span class="w"> </span>.

<span class="c1"># Run the container</span>
docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8000</span>:8000<span class="w"> </span>-e<span class="w"> </span><span class="nv">OPENAI_API_KEY</span><span class="o">=</span>sk-your-key-here<span class="w"> </span>vtai-rust
</code></pre></div>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<p>The Rust implementation shares the same configuration directory (<code>~/.config/vtai/</code>) with the Python version for consistency. However, it uses Rust-native methods for configuration.</p>
<h3 id="command-line-options">Command Line Options<a class="headerlink" href="#command-line-options" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># View available options</span>
./target/release/vtai<span class="w"> </span>--help

<span class="c1"># Set API key</span>
./target/release/vtai<span class="w"> </span>--api-key<span class="w"> </span><span class="nv">openai</span><span class="o">=</span>sk-your-key-here

<span class="c1"># Select model</span>
./target/release/vtai<span class="w"> </span>--model<span class="w"> </span>o3-mini

<span class="c1"># Set host and port</span>
./target/release/vtai<span class="w"> </span>--host<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>--port<span class="w"> </span><span class="m">8080</span>
</code></pre></div>
<h3 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Set API keys</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_API_KEY</span><span class="o">=</span>sk-your-key-here
<span class="nb">export</span><span class="w"> </span><span class="nv">ANTHROPIC_API_KEY</span><span class="o">=</span>sk-ant-your-key-here

<span class="c1"># Set default model</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">VT_DEFAULT_MODEL</span><span class="o">=</span>sonnet

<span class="c1"># Configure server</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">VT_HOST</span><span class="o">=</span><span class="m">0</span>.0.0.0
<span class="nb">export</span><span class="w"> </span><span class="nv">VT_PORT</span><span class="o">=</span><span class="m">9000</span>
</code></pre></div>
<h2 id="performance-comparison">Performance Comparison<a class="headerlink" href="#performance-comparison" title="Permanent link">&para;</a></h2>
<p>The Rust implementation offers significant performance advantages over the Python version:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Rust Implementation</th>
<th>Python Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Initial response latency</td>
<td>~300ms</td>
<td>~800ms</td>
</tr>
<tr>
<td>Memory usage (baseline)</td>
<td>~30MB</td>
<td>~150MB</td>
</tr>
<tr>
<td>Max concurrent users</td>
<td>~500</td>
<td>~100</td>
</tr>
<tr>
<td>Startup time</td>
<td>&lt;1s</td>
<td>~3s</td>
</tr>
</tbody>
</table>
<p><em>Note: Exact performance depends on hardware, model selection, and query complexity.</em></p>
<h2 id="feature-compatibility">Feature Compatibility<a class="headerlink" href="#feature-compatibility" title="Permanent link">&para;</a></h2>
<p>While the Rust implementation aims for feature parity with the Python version, some features may have implementation differences or limitations:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Status</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Text chat</td>
<td>✅ Full support</td>
<td>Complete implementation</td>
</tr>
<tr>
<td>Image analysis</td>
<td>✅ Full support</td>
<td>Vision models fully supported</td>
</tr>
<tr>
<td>Image generation</td>
<td>✅ Full support</td>
<td>All image generation options available</td>
</tr>
<tr>
<td>Voice interaction</td>
<td>⚠️ Partial support</td>
<td>Basic TTS, advanced features in progress</td>
</tr>
<tr>
<td>Web search</td>
<td>✅ Full support</td>
<td>Tavily integration complete</td>
</tr>
<tr>
<td>Thinking mode</td>
<td>✅ Full support</td>
<td>Full reasoning capabilities</td>
</tr>
<tr>
<td>Assistant mode</td>
<td>⚠️ Partial support</td>
<td>Code interpreter in development</td>
</tr>
<tr>
<td>Dynamic routing</td>
<td>✅ Full support</td>
<td>Efficient semantic routing</td>
</tr>
</tbody>
</table>
<h2 id="extending-the-rust-implementation">Extending the Rust Implementation<a class="headerlink" href="#extending-the-rust-implementation" title="Permanent link">&para;</a></h2>
<h3 id="adding-a-new-model-provider">Adding a New Model Provider<a class="headerlink" href="#adding-a-new-model-provider" title="Permanent link">&para;</a></h3>
<p>To add a new model provider:</p>
<ol>
<li>Implement the <code>ModelProvider</code> trait in <code>src/models/providers/</code></li>
<li>Register the provider in the provider factory</li>
<li>Add the provider's configuration to the config module</li>
</ol>
<p>Example provider implementation:</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">async_trait</span><span class="p">::</span><span class="n">async_trait</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">serde</span><span class="p">::{</span><span class="n">Deserialize</span><span class="p">,</span><span class="w"> </span><span class="n">Serialize</span><span class="p">};</span>

<span class="cp">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">MyProviderConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">api_key</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">base_url</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">MyProvider</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">config</span><span class="p">:</span><span class="w"> </span><span class="nc">MyProviderConfig</span><span class="p">,</span>
<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="nc">reqwest</span><span class="p">::</span><span class="n">Client</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[async_trait]</span>
<span class="k">impl</span><span class="w"> </span><span class="n">ModelProvider</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">MyProvider</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">generate_text</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">CompletionParams</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">CompletionResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Implementation details...</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Implement other required methods...</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="creating-a-custom-tool">Creating a Custom Tool<a class="headerlink" href="#creating-a-custom-tool" title="Permanent link">&para;</a></h3>
<p>To create a custom tool:</p>
<ol>
<li>Implement the <code>Tool</code> trait in a new module under <code>src/tools/</code></li>
<li>Register the tool in the tool registry</li>
<li>Add any configuration needed for your tool</li>
</ol>
<p>Example tool implementation:</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">async_trait</span><span class="p">::</span><span class="n">async_trait</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">serde</span><span class="p">::{</span><span class="n">Deserialize</span><span class="p">,</span><span class="w"> </span><span class="n">Serialize</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">serde_json</span><span class="p">::</span><span class="n">Value</span><span class="p">;</span>

<span class="cp">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">MyToolConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">api_key</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">MyTool</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">config</span><span class="p">:</span><span class="w"> </span><span class="nc">MyToolConfig</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[async_trait]</span>
<span class="k">impl</span><span class="w"> </span><span class="n">Tool</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">MyTool</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="o">&#39;</span><span class="nb">static</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;my_custom_tool&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="o">&#39;</span><span class="nb">static</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;A custom tool that does something useful&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">:</span><span class="w"> </span><span class="nc">Value</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Tool implementation...</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Implement other required methods...</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="adding-a-new-router">Adding a New Router<a class="headerlink" href="#adding-a-new-router" title="Permanent link">&para;</a></h3>
<p>To add a new semantic router:</p>
<ol>
<li>Implement the <code>Router</code> trait in <code>src/router/</code></li>
<li>Register your router in the router registry</li>
<li>Add configuration options if needed</li>
</ol>
<p>Example router implementation:</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">async_trait</span><span class="p">::</span><span class="n">async_trait</span><span class="p">;</span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">MyCustomRouter</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Router fields...</span>
<span class="p">}</span>

<span class="cp">#[async_trait]</span>
<span class="k">impl</span><span class="w"> </span><span class="n">Router</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">MyCustomRouter</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">classify</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">RouteIntent</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Classification logic...</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Implement other required methods...</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="common-issues">Common Issues<a class="headerlink" href="#common-issues" title="Permanent link">&para;</a></h3>
<h4 id="build-errors">Build Errors<a class="headerlink" href="#build-errors" title="Permanent link">&para;</a></h4>
<p>If you encounter build errors:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Update Rust toolchain</span>
rustup<span class="w"> </span>update

<span class="c1"># Clean and rebuild</span>
cargo<span class="w"> </span>clean
cargo<span class="w"> </span>build<span class="w"> </span>--release
</code></pre></div>
<h4 id="api-connection-issues">API Connection Issues<a class="headerlink" href="#api-connection-issues" title="Permanent link">&para;</a></h4>
<p>For API connection problems:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check API key configuration</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$OPENAI_API_KEY</span>

<span class="c1"># Test API connection</span>
curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://api.openai.com/v1/chat/completions<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$OPENAI_API_KEY</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;model&quot;:&quot;gpt-3.5-turbo&quot;, &quot;messages&quot;:[{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:&quot;Hello&quot;}]}&#39;</span>
</code></pre></div>
<h4 id="performance-optimization">Performance Optimization<a class="headerlink" href="#performance-optimization" title="Permanent link">&para;</a></h4>
<p>To optimize performance:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Enable release optimizations</span>
<span class="nv">RUSTFLAGS</span><span class="o">=</span><span class="s2">&quot;-C target-cpu=native&quot;</span><span class="w"> </span>cargo<span class="w"> </span>build<span class="w"> </span>--release

<span class="c1"># Run with thread pool configuration</span>
<span class="nv">VT_THREAD_POOL_SIZE</span><span class="o">=</span><span class="m">8</span><span class="w"> </span>./target/release/vtai
</code></pre></div>
<h2 id="future-development">Future Development<a class="headerlink" href="#future-development" title="Permanent link">&para;</a></h2>
<p>The Rust implementation roadmap includes:</p>
<ul>
<li><strong>Full Assistant API Integration</strong>: Complete implementation of OpenAI's Assistant API</li>
<li><strong>Enhanced Tool Framework</strong>: More powerful and flexible tool ecosystem</li>
<li><strong>UI Improvements</strong>: Custom web interface optimized for the Rust backend</li>
<li><strong>Embedded Database</strong>: Efficient local storage for conversation history</li>
<li><strong>Distributed Deployment</strong>: Multi-node deployment for high availability</li>
</ul>
<h2 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h2>
<p>Contributions to the Rust implementation are welcome:</p>
<ol>
<li>Fork the repository</li>
<li>Create a feature branch</li>
<li>Implement your changes with tests</li>
<li>Submit a pull request</li>
</ol>
<p>For development setup:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Setup development environment</span>
<span class="nb">cd</span><span class="w"> </span>rust-vtai

<span class="c1"># Install development tools</span>
rustup<span class="w"> </span>component<span class="w"> </span>add<span class="w"> </span>clippy<span class="w"> </span>rustfmt

<span class="c1"># Run tests</span>
cargo<span class="w"> </span><span class="nb">test</span>

<span class="c1"># Check code style</span>
cargo<span class="w"> </span>fmt<span class="w"> </span>--check
cargo<span class="w"> </span>clippy
</code></pre></div>
<hr />
<p>For more information on the architectural differences between the Python and Rust implementations, see the <a href="../architecture/">Architecture Overview</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/vinhnx/VT.ai" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/vtai/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.indexes", "content.code.copy", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>